"use strict";(()=>{var e={};e.id=1791,e.ids=[1791],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9778:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>u,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>c});var n=r(9303),o=r(8716),i=r(670),s=r(7070);async function c(e){let{searchParams:t}=new URL(e.url),r=t.get("code"),a=t.get("state"),n=t.get("error");if(n||!r||!a){let t=encodeURIComponent(n||"missing code or state");return s.NextResponse.redirect(new URL("/?linear_error="+t,e.url))}let o=await fetch("https://api.linear.app/oauth/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:r,client_id:process.env.LINEAR_CLIENT_ID,redirect_uri:"https://hw-dashboard.vercel.app/api/linear/callback",grant_type:"authorization_code",code_verifier:a}).toString()}),i=await o.json();if(!i.access_token){let t=encodeURIComponent(JSON.stringify(i));return s.NextResponse.redirect(new URL("/?linear_error="+t,e.url))}return await fetch("http://159.65.205.244:3000/config/linear-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i.access_token})}).catch(()=>{}),s.NextResponse.redirect(new URL("/",e.url))}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/linear/callback/route",pathname:"/api/linear/callback",filename:"route",bundlePath:"app/api/linear/callback/route"},resolvedPagePath:"/tmp/hw-demo/dashboard/app/api/linear/callback/route.js",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:u}=p,h="/api/linear/callback/route";function m(){return(0,i.patchFetch)({serverHooks:u,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(9778));module.exports=a})();
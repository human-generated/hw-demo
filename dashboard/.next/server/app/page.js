(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(169),r(7139),r(5866);var n=r(3191),o=r(8716),s=r(7922),i=r.n(s),a=r(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,169)),"/tmp/hw-demo/dashboard/app/page.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7139)),"/tmp/hw-demo/dashboard/app/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/tmp/hw-demo/dashboard/app/page.jsx"],m="/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9905:(e,t,r)=>{Promise.resolve().then(r.bind(r,7214))},8240:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},7214:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(326),o=r(7577);let s={bg:"#F4F4F4",card:"#FFFFFF",text:"#0D0D0D",muted:"#888888",faint:"rgba(0,0,0,0.07)",border:"1px solid rgba(0,0,0,0.08)",shadow:"0 2px 12px rgba(0,0,0,0.06)",radius:"4px",mono:"'JetBrains Mono', 'Fira Mono', monospace",ui:"'Space Grotesk', 'Inter', sans-serif",mint:"#6CEFA0",blue:"#6CDDEF",purple:"#B06CEF",orange:"#EF9B6C",red:"#EF4444",yellow:"#F5C842"};function i({color:e,children:t,style:r={}}){return n.jsx("span",{style:{background:e||s.faint,color:s.text,borderRadius:s.radius,padding:"2px 8px",fontSize:"0.6rem",fontFamily:s.mono,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.06em",display:"inline-block",...r},children:t})}function a({onClick:e,children:t,ghost:r,small:o,disabled:i,color:a,style:l={}}){return n.jsx("button",{onClick:e,disabled:i,style:{background:r?s.card:a||s.text,color:r?s.muted:"#fff",border:r?"1px solid rgba(0,0,0,0.1)":"none",borderRadius:s.radius,padding:o?"0.3rem 0.75rem":"0.5rem 1.2rem",cursor:i?"not-allowed":"pointer",opacity:i?.5:1,fontFamily:s.mono,fontSize:o?"0.62rem":"0.7rem",textTransform:"uppercase",letterSpacing:"0.06em",transition:"opacity 0.15s",whiteSpace:"nowrap",...l},children:t})}function l({value:e=0,color:t=s.mint}){return n.jsx("div",{style:{background:s.faint,borderRadius:99,height:6,overflow:"hidden",width:"100%"},children:n.jsx("div",{style:{width:`${Math.min(100,e)}%`,height:"100%",background:t,borderRadius:99,transition:"width 0.4s ease"}})})}let d=["start","research","building","platforms","workers"],c={crm:"\uD83D\uDC65",support:"\uD83C\uDFAB",analytics:"\uD83D\uDCCA",erp:"\uD83D\uDCE6",ecommerce:"\uD83D\uDED2",hr:"\uD83E\uDDD1‍\uD83D\uDCBC",messaging:"\uD83D\uDCAC"},m={crm:s.blue,support:s.orange,analytics:s.purple,erp:s.mint,ecommerce:s.yellow,hr:s.red,messaging:"#aaa"},p={crm:["Salesforce Sales Cloud","Microsoft Dynamics 365 CRM","HubSpot CRM","SAP CRM","Oracle Siebel CRM","Zoho CRM","SugarCRM"],erp:["SAP S/4HANA","Microsoft Dynamics 365 Finance","Oracle Fusion ERP","NetSuite","Odoo","Sage X3","Infor CloudSuite"],support:["Zendesk Suite","Freshdesk","ServiceNow CSM","Jira Service Management","Intercom","HubSpot Service Hub","Salesforce Service Cloud"],analytics:["Power BI","Tableau","Looker (Google)","SAP Analytics Cloud","Qlik Sense","Metabase","Sisense"],ecommerce:["Adobe Commerce (Magento)","SAP Commerce Cloud","Shopify Plus","BigCommerce","Salesforce Commerce Cloud","WooCommerce","Proprietary"],hr:["SAP SuccessFactors","Workday HCM","Oracle HCM Cloud","ADP Workforce Now","BambooHR","UKG Pro","Charisma HCM"],messaging:["Microsoft Teams","Slack","Google Workspace","Zoom Team Chat","Webex"]};function u({currentId:e,onSelect:t,onDelete:r,onClose:i}){let[a,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),m={start:s.muted,research:s.blue,building:s.orange,platforms:s.mint,workers:s.purple};async function p(e,t){e.stopPropagation(),confirm("Delete this session?")&&(c(t),await fetch(`/api/demo/session/${t}`,{method:"DELETE"}),r(t),fetch("/api/demo/sessions").then(e=>e.json()).then(l).catch(()=>l([])),c(null))}return(0,n.jsxs)("div",{style:{position:"fixed",top:52,right:0,width:340,bottom:0,background:s.card,borderLeft:s.border,boxShadow:"-4px 0 24px rgba(0,0,0,0.08)",display:"flex",flexDirection:"column",zIndex:100},children:[(0,n.jsxs)("div",{style:{padding:"1rem 1.25rem 0.75rem",borderBottom:s.border,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.06em"},children:"Sessions"}),n.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",color:s.muted,fontSize:"1rem",lineHeight:1},children:"✕"})]}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"0.5rem"},children:[null===a&&n.jsx("div",{style:{padding:"1rem",textAlign:"center",color:s.muted,fontFamily:s.mono,fontSize:"0.7rem"},children:"Loading…"}),null!==a&&0===a.length&&n.jsx("div",{style:{padding:"1rem",textAlign:"center",color:s.muted,fontFamily:s.mono,fontSize:"0.7rem"},children:"No sessions yet"}),(a||[]).map(r=>{let o=r.id===e,a=r.phase||"start",l=r.updatedAt?(()=>{let e=Date.now()-new Date(r.updatedAt).getTime();return e<6e4?"just now":e<36e5?`${Math.floor(e/6e4)}m ago`:e<864e5?`${Math.floor(e/36e5)}h ago`:`${Math.floor(e/864e5)}d ago`})():"",c=r.power&&r.power.totalWh>0?r.power.totalWh<.001?`${(1e6*r.power.totalWh).toFixed(0)}\xb5Wh`:r.power.totalWh<1?`${(1e3*r.power.totalWh).toFixed(2)}mWh`:`${r.power.totalWh.toFixed(3)}Wh`:null;return(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",borderRadius:s.radius,marginBottom:4,background:o?s.faint:"transparent",border:o?"1px solid rgba(0,0,0,0.1)":"1px solid transparent",transition:"background 0.15s"},onMouseEnter:e=>{o||(e.currentTarget.style.background=s.faint)},onMouseLeave:e=>{o||(e.currentTarget.style.background="transparent")},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[n.jsx("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.72rem"},children:r.company||n.jsx("span",{style:{color:s.muted},children:"Unnamed"})}),n.jsx("span",{style:{fontFamily:s.mono,fontSize:"0.58rem",fontWeight:700,textTransform:"uppercase",color:m[a]||s.muted},children:a})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:s.muted,fontFamily:s.mono,fontSize:"0.62rem",flexWrap:"wrap"},children:[(0,n.jsxs)("span",{children:[r.id.slice(0,10),"…"]}),n.jsx("span",{children:"\xb7"}),(0,n.jsxs)("span",{children:[r.platforms,"P ",r.workers,"W"]}),c&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("span",{children:"\xb7"}),(0,n.jsxs)("span",{style:{color:s.mint},children:["⚡ ",c]})]}),l&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("span",{children:"\xb7"}),n.jsx("span",{children:l})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.4rem",marginTop:"0.5rem"},children:[!o&&n.jsx("button",{onClick:()=>{t(r.id),i()},style:{flex:1,background:s.text,color:"#fff",border:"none",borderRadius:s.radius,padding:"0.25rem 0.5rem",fontFamily:s.mono,fontSize:"0.6rem",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer"},children:"Resume"}),o&&n.jsx("div",{style:{flex:1,fontSize:"0.58rem",fontFamily:s.mono,color:s.mint,fontWeight:700,display:"flex",alignItems:"center"},children:"● CURRENT"}),n.jsx("button",{onClick:e=>p(e,r.id),disabled:d===r.id,style:{background:"none",border:"1px solid rgba(239,68,68,0.3)",borderRadius:s.radius,padding:"0.25rem 0.6rem",fontFamily:s.mono,fontSize:"0.6rem",color:s.red,cursor:"pointer",opacity:d===r.id?.5:1},children:"Delete"})]})]},r.id)})]})]})}function g(){let[e,t]=(0,o.useState)(null),[r,l]=(0,o.useState)("start"),[c,m]=(0,o.useState)([{role:"assistant",content:"Welcome to H-Demo. Enter a company name to begin your AI back-office simulation."}]),[g,h]=(0,o.useState)({tokens:0,requests:0,estimatedCostUsd:0}),[j,D]=(0,o.useState)({totalWh:0,runs:0}),[z,F]=(0,o.useState)(""),[T,I]=(0,o.useState)(!1),[$,W]=(0,o.useState)(!1),[R,P]=(0,o.useState)([]),[_,B]=(0,o.useState)(null),[A,E]=(0,o.useState)([]),[O,M]=(0,o.useState)({}),[H,L]=(0,o.useState)(""),[N,q]=(0,o.useState)([]),[J,G]=(0,o.useState)([]),[U,K]=(0,o.useState)(""),[Y,V]=(0,o.useState)({}),[X,Z]=(0,o.useState)([]),[Q,ee]=(0,o.useState)(null),[et,er]=(0,o.useState)(""),[en,eo]=(0,o.useState)([]),[es,ei]=(0,o.useState)(!1),[ea,el]=(0,o.useState)([]),[ed,ec]=(0,o.useState)({}),[em,ep]=(0,o.useState)({}),[eu,eg]=(0,o.useState)(null),[ef,eh]=(0,o.useState)(!1),[ex,ey]=(0,o.useState)(!1),[eb,ej]=(0,o.useState)(""),[ew,eS]=(0,o.useState)(""),[ev,ek]=(0,o.useState)(""),[eD,eC]=(0,o.useState)(!1),ez=(0,o.useRef)(null);async function eF(){try{let e=await fetch("/api/demo/session",{method:"POST"}),r=await e.json();r.sessionId&&t(r.sessionId)}catch{}}function eT(e,t,r){m(n=>[...n,{role:e,content:t,tag:r,at:new Date().toISOString()}])}async function eI(t){let r=(t||"").trim();if(r){I(!0),l("research"),eT("user",r),eT("assistant",`Researching ${r}...`,"agent:research");try{let t=await fetch("/api/demo/research",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company:r,sessionId:e})}),n=await t.json();if(n.company){B(n.company);let e=n.platforms||[];E(e);let t={};e.forEach(e=>{let r=p[e.id]||[],n=e.actual_software&&"To be determined"!==e.actual_software&&"Unknown"!==e.actual_software&&!e.actual_software.startsWith("Unknown");t[e.id]=n?e.actual_software:r[0]||""}),M(t),L(n.summary||""),q(n.key_findings||[]),G(n.citations||[]),K(n.raw_research||"");let r=(n.platforms||[]).filter(e=>e.selected),o=r.filter(e=>e.actual_software&&"To be determined"!==e.actual_software).map(e=>`${e.name} (${e.actual_software})`),s=[`**${n.company.name}** — ${n.company.industry}, ${n.company.country||""}, ${n.company.size||""}`,n.summary,o.length?`Identified tools: ${o.join(", ")}.`:"",`
Selected ${r.length} platforms to simulate. Confirm or adjust below, then click Build.`].filter(Boolean).join("\n");eT("assistant",s,"agent:done")}else eT("assistant",n.error||"Research failed. Try again.","agent:error"),l("start")}catch(e){eT("assistant","Research error: "+e.message,"agent:error"),l("start")}I(!1)}}async function e$(){let t=A.filter(e=>e.selected);if(!t.length)return;l("building"),eT("assistant",`Building ${t.length} platform sandboxes with shared database...`,"agent:build");let r={};t.forEach(e=>{r[e.id]={status:"queued",progress:0,name:e.name}}),V(r);try{let r=await fetch("/api/demo/build-platforms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,platforms:t.map(e=>({...e,software:O[e.id]||e.actual_software||""})),realClient:eD?{name:eb,email:ew,phone:ev}:null})}),n=await r.json();n.platforms&&(Z(n.platforms),eT("assistant",`All ${n.platforms.length} platforms deployed. You can preview and customize each one.`,"agent:done"),l("platforms"))}catch(e){eT("assistant","Build error: "+e.message,"agent:error")}}async function eW(){if(et.trim()&&Q){er(""),eo(e=>[...e,{role:"user",content:et}]),ei(!0);try{let t=await fetch(`/api/demo/platforms/${Q.sandboxId}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:et,sessionId:e})}),r=await t.json();eo(e=>[...e,{role:"assistant",content:r.message||r.error||"Done."}])}catch(e){eo(t=>[...t,{role:"assistant",content:"Error: "+e.message}])}ei(!1)}}async function eR(){eh(!0),eT("assistant",`Spawning ${X.length} parallel Worker Proposal Agents — one per platform...`,"agent:analyze"),P(e=>{let t=e.find(e=>"worker-proposal-agent"===e.role)||{id:"wpa-root-"+Date.now(),name:"Worker Proposal Agent",icon:"\uD83E\uDD16",role:"worker-proposal-agent",parentId:null,status:"running",task:"Propose workers"},r=e.some(e=>"worker-proposal-agent"===e.role),n=X.map((e,r)=>({id:`wpa-sub-${Date.now()}-${r}`,name:`${e.name} Worker Agent`,icon:"⚙️",role:`worker-agent-${e.id}`,parentId:t.id,status:"running",task:`Design worker for ${e.name}`}));return r?[...e,...n]:[...e,t,...n]});try{let t=await fetch("/api/demo/workers/propose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,platforms:X})}),r=await t.json();if(r.workers){el(r.workers),l("workers"),P(e=>e.map(e=>e.role.startsWith("worker-agent-")?{...e,status:"done"}:"worker-proposal-agent"===e.role?{...e,status:"done"}:e));let e=r.workers.filter(e=>e.redelegated).length,t=e>0?`${r.workers.length} workers proposed (${e} re-delegated via fallback). Click "View Worker →" to configure each.`:`${r.workers.length} workers proposed by parallel agents. Click "View Worker →" to configure each via chat.`;eT("assistant",t,"agent:done")}}catch(e){eT("assistant","Proposal error: "+e.message,"agent:error")}eh(!1)}async function eP(t){eg(t.id);try{let r=await fetch("/api/demo/workers/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,worker:t,realClient:eD?{name:eb,email:ew,phone:ev}:null})}),n=await r.json();el(e=>e.map(e=>e.id===t.id?{...e,status:n.status||"deployed",pid:n.pid}:e)),eT("assistant",`Worker "${t.name}" deployed. ${n.message||""}`,"agent:done")}catch(e){eT("assistant","Deploy error: "+e.message,"agent:error")}eg(null)}async function e_(t){try{let r=await fetch(`/api/demo/workers/${t.id}/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e})}),n=await r.json();eT("assistant",`Worker "${t.name}" triggered. ${n.result||""}`,"agent:done"),eB(t.id)}catch(e){}}async function eB(t){try{let r=await fetch(`/api/demo/workers/${t}/logs?sessionId=${e}`),n=await r.json();ep(e=>({...e,[t]:n.logs||[]}))}catch{}}async function eA(){let t=z.trim();if(t&&!T){F(""),eT("user",t),I(!0);try{let n=await fetch("/api/demo/orchestrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,message:t})}),o=await n.json(),s=o.action||{type:"none",params:{}};if(o.usage&&h(o.usage),o.plan&&o.plan.length>0){let e={id:"orchestrator-"+Date.now(),name:"Orchestrator",icon:"\uD83E\uDDE0",role:"orchestrator",parentId:null,status:"done",task:t},r=o.plan.map((t,r)=>({id:`agent-${Date.now()}-${r}`,name:t.agent||`Agent ${r+1}`,icon:t.agent?.includes("Research")?"\uD83D\uDD0D":t.agent?.includes("Build")?"\uD83C\uDFD7️":t.agent?.includes("Worker")?"\uD83E\uDD16":"⚙️",role:(t.agent||"").toLowerCase().replace(/\s+/g,"-"),parentId:e.id,status:"pending",task:t.task,step:t.step}));P([e,...r]);let n=o.plan.map(e=>`${e.step}. ${e.task} → ${e.agent}`).join("\n");eT("assistant",`Task decomposition:
${n}`,"agent:plan")}function r(e,t,r){P(n=>{let o=n.map(r=>r.role===e?{...r,status:t}:r);if(r){let t=o.find(t=>t.role===e);if(t){let e=r.map((e,r)=>({id:`sub-${Date.now()}-${r}`,name:e.name,icon:e.icon||"\uD83D\uDD27",role:e.role,parentId:t.id,status:e.status||"running",task:e.task}));o=[...o,...e]}}return o})}if(o.message&&eT("assistant",o.message,"agent:orchestrator"),"full_setup"===s.type){let e=s.params?.company||t;I(!1),r("orchestrator","delegating"),eT("assistant","Starting full setup — delegating to Research Agent...","agent:orchestrator"),await eI(e);return}if("start_research"===s.type){let e=s.params?.company||t;I(!1),r("research-agent","running"),eI(e);return}if("build_platforms"===s.type){I(!1),r("build-agent","running"),e$();return}if("propose_workers"===s.type){I(!1),r("worker-proposal-agent","running"),eR();return}else if("modify_platforms"===s.type){let{add:e=[],remove:t=[]}=s.params||{};E(r=>{let n=r.map(r=>t.map(e=>e.toLowerCase()).some(e=>r.name.toLowerCase().includes(e)||r.id.includes(e))?{...r,selected:!1}:t.length&&e.map(e=>e.toLowerCase()).some(e=>r.name.toLowerCase().includes(e)||r.id.includes(e))?{...r,selected:!0}:r);return e.forEach(e=>{let t="custom-"+e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");n.find(r=>r.id===t||r.name.toLowerCase()===e.toLowerCase())||(n=[...n,{id:t,name:e,reason:"Added by user",selected:!0,custom:!0}])}),n})}}catch(e){eT("assistant","Error: "+e.message,"agent:error")}I(!1)}}function eE(){t(null),l("start"),m([{role:"assistant",content:"New session started. Enter a company name to begin."}]),B(null),E([]),Z([]),el([]),V({}),eC(!1),P([]),eF()}return(0,o.useRef)(null),(0,n.jsxs)("div",{style:{fontFamily:s.ui,background:s.bg,color:s.text,height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,n.jsxs)("div",{style:{background:s.card,borderBottom:s.border,padding:"0 1.5rem",height:52,display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,boxShadow:s.shadow},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[n.jsx("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.95rem",letterSpacing:"-0.02em"},children:"H-Demo"}),n.jsx("span",{style:{color:s.muted,fontSize:"0.7rem",fontFamily:s.mono},children:"AI Back-Office Simulator"}),e&&n.jsx(i,{color:s.faint,style:{color:s.muted},children:e.slice(0,8)})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("div",{style:{display:"flex",gap:"0.25rem",alignItems:"center"},children:d.filter(e=>"start"!==e).map((e,t,o)=>{let i=d.indexOf(r),a=d.indexOf(e),c=r===e,m=i>a,p=m||c;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.2rem"},children:[(0,n.jsxs)("div",{onClick:()=>p&&l(e),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.25rem 0.5rem",borderRadius:s.radius,background:c?s.text:m?"rgba(108,239,160,0.15)":"transparent",border:c?"none":m?"1px solid rgba(108,239,160,0.4)":"1px solid transparent",cursor:p?"pointer":"default",transition:"all 0.15s"},children:[n.jsx("div",{style:{width:6,height:6,borderRadius:"50%",flexShrink:0,background:c?"#fff":m?s.mint:s.faint}}),n.jsx("span",{style:{fontSize:"0.6rem",fontFamily:s.mono,fontWeight:c?700:400,color:c?"#fff":m?s.mint:s.muted,textTransform:"uppercase",whiteSpace:"nowrap"},children:"start"===e?"Start":"research"===e?"Research":"building"===e?"Building":"platforms"===e?"Platforms":"workers"===e?"Workers":e})]}),t<o.length-1&&n.jsx("span",{style:{color:s.faint,fontSize:"0.75rem"},children:"›"})]},e)})}),n.jsx(a,{ghost:!0,small:!0,onClick:()=>W(e=>!e),children:"Sessions"}),n.jsx(a,{ghost:!0,small:!0,onClick:eE,children:"New Session"})]})]}),$&&n.jsx(u,{currentId:e,onClose:()=>W(!1),onDelete:t=>{t===e&&eE()},onSelect:async r=>{if(r===e)return;let n=await fetch(`/api/demo/session/${r}`);if(!n.ok)return;let o=await n.json();t(r),P([]),function(e){let t=e.phase||"start";if(l(t),e.company&&B(e.company),e.usage&&h(e.usage),e.power&&D(e.power),e.researchSummary&&L(e.researchSummary),e.researchFindings&&q(e.researchFindings),e.platforms&&e.platforms.length>0){E(e.platforms);let t=e.platforms.filter(e=>"deployed"===e.status||"building"===e.status);t.length>0&&Z(t)}e.workers&&e.workers.length>0&&el(e.workers);let r=(e.platforms||[]).filter(e=>"deployed"===e.status).length,n=(e.workers||[]).length;eT("assistant",`Session restored.${e.company?` Company: ${e.company.name}.`:""}${r?` ${r} platform${r>1?"s":""} deployed.`:""}${n?` ${n} worker${n>1?"s":""} configured.`:""} Phase: ${t}.`,"agent:info")}(o)}}),(0,n.jsxs)("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[n.jsx("div",{style:{width:380,display:"flex",flexDirection:"column",borderRight:s.border,background:s.card,flexShrink:0},children:Q?n.jsx(b,{platform:Q,history:en,input:et,setInput:er,onSend:eW,loading:es,onBack:()=>{ee(null),eo([])}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.map((e,t)=>n.jsx(y,{msg:e},t)),n.jsx("div",{ref:ez})]}),n.jsx(x,{nodes:R,onClear:()=>P([])}),(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.75rem 1rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("input",{value:z,onChange:e=>F(e.target.value),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eA())},placeholder:"start"===r?"Enter company name...":"Chat with orchestrator...",disabled:T,style:{flex:1,background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.5rem 0.75rem",fontFamily:s.mono,fontSize:"0.8rem",color:s.text,outline:"none"}}),n.jsx(a,{onClick:eA,disabled:T||!z.trim(),small:!0,children:T?"...":"→"})]}),(g.tokens>0||j.totalWh>0)&&(0,n.jsxs)("div",{style:{marginTop:"0.4rem",display:"flex",gap:"0.75rem",fontSize:"0.58rem",fontFamily:s.mono,color:s.muted,opacity:.7,flexWrap:"wrap"},children:[g.tokens>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{children:["↑",g.inputTokens||0," ↓",g.outputTokens||0," tokens"]}),(0,n.jsxs)("span",{children:[g.requests||0," agent calls"]}),(0,n.jsxs)("span",{style:{color:s.orange},children:["$",(g.estimatedCostUsd||0).toFixed(4)]})]}),j.totalWh>0&&(0,n.jsxs)("span",{style:{color:"#6CEFA0"},children:["⚡ ",(1e3*j.totalWh).toFixed(3)," mWh \xb7 ",j.runs||0," runs"]})]}),(0,n.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",padding:"0.3rem 0"},onClick:()=>ey(!ex),children:[(0,n.jsxs)("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,textTransform:"uppercase",letterSpacing:"0.08em"},children:["Real Client Data ",eD&&n.jsx("span",{style:{color:s.orange},children:"● Active"})]}),n.jsx("span",{style:{color:s.muted,fontSize:"0.7rem"},children:ex?"▲":"▼"})]}),ex&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.5rem"},children:[n.jsx("input",{value:eb,onChange:e=>ej(e.target.value),placeholder:"Name",style:f}),n.jsx("input",{value:ew,onChange:e=>eS(e.target.value),placeholder:"Email",style:f}),n.jsx("input",{value:ev,onChange:e=>ek(e.target.value),placeholder:"Phone",style:f}),n.jsx(a,{small:!0,onClick:function(){(eb||ew||ev)&&(eC(!0),eT("assistant",`Real client data set: ${eb} (${ew}). Workers will use this contact.`,"agent:info"))},children:"Set as Real Client"})]})]})]})]})}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.5rem"},children:["start"===r&&n.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{maxWidth:480,textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,textTransform:"uppercase",letterSpacing:"0.15em",marginBottom:"1rem"},children:"AI Back-Office Simulator"}),n.jsx("h1",{style:{fontSize:"2rem",fontWeight:700,marginBottom:"0.75rem",letterSpacing:"-0.03em"},children:"Type a company name to begin"}),n.jsx("p",{style:{color:s.muted,fontSize:"0.88rem",lineHeight:1.6,marginBottom:"2rem"},children:"The orchestrator will research the company, detect back-office platforms, build live sandboxes, and deploy AI workers — all through chat."}),n.jsx("div",{style:{display:"flex",gap:"2rem",justifyContent:"center"},children:[{icon:"\uD83D\uDD0D",label:"Research",desc:"AI discovers platforms"},{icon:"\uD83C\uDFD7️",label:"Build",desc:"Live sandbox per platform"},{icon:"\uD83E\uDD16",label:"Automate",desc:"Workers with real triggers"}].map(e=>(0,n.jsxs)("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.4rem"},children:e.icon}),n.jsx("div",{style:{fontWeight:700,fontSize:"0.8rem",marginBottom:"0.2rem"},children:e.label}),n.jsx("div",{style:{color:s.muted,fontSize:"0.7rem"},children:e.desc})]},e.label))})]})}),"research"===r&&n.jsx(w,{company:_,platforms:A,setPlatforms:E,platformSoftware:O,setPlatformSoftware:M,summary:H,loading:T,onBuild:e$,findings:N,citations:J,rawResearch:U}),"building"===r&&n.jsx(v,{progress:Y,platforms:A.filter(e=>e.selected)}),("platforms"===r||"workers"===r)&&X.length>0&&n.jsx(k,{platforms:X,sessionId:e,onChat:e=>{ee(e),eo([])},onProposeWorkers:eR,proposing:ef,showWorkers:"workers"===r,realClientActive:eD}),"workers"===r&&ea.length>0&&n.jsx(C,{workers:ea,sessionId:e,onDeploy:eP,onRun:e_,deployingWorker:eu,logs:em,fetchLogs:eB,activeTab:ed,setActiveTab:ec,realClientActive:eD})]})]})]})}let f={background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.4rem 0.6rem",fontFamily:s.mono,fontSize:"0.75rem",color:s.text,outline:"none",width:"100%"},h={running:s.blue,done:s.mint,pending:s.muted,delegating:s.orange,error:s.red};function x({nodes:e,onClear:t}){if(!e||0===e.length)return null;let r=e.filter(e=>!e.parentId);return(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.5rem 1rem 0.25rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.35rem"},children:[n.jsx("span",{style:{fontFamily:s.mono,fontSize:"0.6rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",color:s.muted},children:"Agent Delegation"}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",color:s.muted,fontSize:"0.65rem",fontFamily:s.mono},children:"clear"})]}),r.map(t=>(function t(r,o=0){let i=e.filter(e=>e.parentId===r.id);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",paddingLeft:18*o,paddingTop:4,paddingBottom:4},children:[o>0&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:2},children:[n.jsx("div",{style:{width:1,height:8,background:"rgba(0,0,0,0.12)"}}),n.jsx("div",{style:{width:8,height:1,background:"rgba(0,0,0,0.12)",marginLeft:-4}})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flex:1},children:[n.jsx("span",{style:{fontSize:"0.85rem",lineHeight:1},children:r.icon}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[n.jsx("span",{style:{fontFamily:s.mono,fontSize:"0.65rem",fontWeight:700},children:r.name}),n.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:h[r.status]||s.muted,flexShrink:0}}),n.jsx("span",{style:{fontFamily:s.mono,fontSize:"0.55rem",color:s.muted,textTransform:"uppercase"},children:r.status})]}),r.task&&n.jsx("div",{style:{fontFamily:s.mono,fontSize:"0.6rem",color:s.muted,marginTop:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.task})]})]})]}),i.map(e=>t(e,o+1))]},r.id)})(t))]})}function y({msg:e}){let t="user"===e.role;return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:t?"flex-end":"flex-start",gap:"0.25rem"},children:[e.tag&&n.jsx(i,{color:"agent:done"===e.tag?s.mint:"agent:error"===e.tag?s.red:"agent:build"===e.tag?s.blue:"agent:analyze"===e.tag?s.purple:"agent:orchestrator"===e.tag?s.orange:"agent:plan"===e.tag?s.purple:s.faint,style:{marginBottom:2},children:e.tag.replace("agent:","")}),n.jsx("div",{style:{maxWidth:"90%",background:t?s.text:s.card,color:t?"#fff":s.text,borderRadius:s.radius,padding:"0.6rem 0.9rem",fontSize:"0.82rem",lineHeight:1.5,boxShadow:s.shadow,border:t?"none":s.border,fontFamily:"agent:plan"===e.tag?s.mono:s.ui,whiteSpace:"agent:plan"===e.tag?"pre-wrap":"normal"},children:e.content})]})}function b({platform:e,history:t,input:r,setInput:i,onSend:l,loading:d,onBack:m}){let p=(0,o.useRef)(null);return(0,n.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",borderBottom:s.border,display:"flex",alignItems:"center",gap:"0.75rem",background:s.faint},children:[n.jsx(a,{ghost:!0,small:!0,onClick:m,children:"← Back"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontFamily:s.mono,fontSize:"0.7rem",fontWeight:700},children:[c[e.id]||"\uD83D\uDD27"," ",e.name," Agent"]}),n.jsx("div",{style:{fontSize:"0.62rem",color:s.muted},children:"Ask to customize this platform"})]})]}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[0===t.length&&n.jsx("div",{style:{color:s.muted,fontSize:"0.78rem",fontStyle:"italic"},children:'Ask me to modify this platform: "add a revenue chart", "change colors to dark", "add search bar"'}),t.map((e,t)=>n.jsx(y,{msg:e},t)),d&&n.jsx("div",{style:{color:s.muted,fontSize:"0.75rem",fontStyle:"italic"},children:"Building..."}),n.jsx("div",{ref:p})]}),(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.75rem",display:"flex",gap:"0.5rem"},children:[n.jsx("input",{value:r,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&l()},placeholder:"Customize this platform...",style:{...f,flex:1}}),n.jsx(a,{small:!0,onClick:l,disabled:d||!r.trim(),children:"→"})]})]})}function j({platformId:e,options:t,value:r,onChange:i}){let a=t.includes(r),l=r&&!a?"__custom__":r||t[0]||"",[d,c]=(0,o.useState)(!a&&r?r:"");return(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{marginTop:"0.4rem"},children:[t.length>0&&(0,n.jsxs)("select",{value:l,onChange:e=>{"__custom__"===e.target.value?i(d||"__custom__"):i(e.target.value)},style:{width:"100%",background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.22rem 0.4rem",fontFamily:s.mono,fontSize:"0.63rem",color:s.text,cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[t.map(e=>n.jsx("option",{value:e,children:e},e)),n.jsx("option",{value:"__custom__",children:"Custom..."})]}),"__custom__"===l&&n.jsx("input",{type:"text",value:d,autoFocus:t.length>0,onChange:e=>{c(e.target.value),i(e.target.value||"__custom__")},placeholder:"e.g. Oracle EBS, Custom-built...",style:{marginTop:t.length>0?"0.3rem":0,width:"100%",background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.22rem 0.4rem",fontFamily:s.mono,fontSize:"0.63rem",color:s.text,outline:"none",boxSizing:"border-box"}})]})}function w({company:e,platforms:t,setPlatforms:r,platformSoftware:l,setPlatformSoftware:d,summary:u,loading:g,onBuild:f,findings:h,citations:x,rawResearch:y}){let[b,w]=(0,o.useState)(!1),[v,k]=(0,o.useState)("");function D(){let e=v.trim();if(!e)return;let t="custom-"+e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");r(r=>[...r,{id:t,name:e,reason:"Custom platform added by user",actual_software:e,selected:!0,custom:!0}]),k(""),w(!1)}if(g||!e)return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"1rem"},children:[n.jsx("div",{style:{fontFamily:s.mono,fontSize:"0.8rem",color:s.muted},children:"Researching company intelligence..."}),n.jsx("div",{style:{display:"flex",gap:"0.4rem"},children:[0,1,2].map(e=>n.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:s.blue,animation:`pulse ${.6+.2*e}s ease-in-out infinite alternate`}},e))}),n.jsx("style",{children:"@keyframes pulse { from { opacity: 0.3; transform: scale(0.8); } to { opacity: 1; transform: scale(1.2); } }"})]});let C=t.filter(e=>e.selected).length;return(0,n.jsxs)("div",{style:{display:"flex",gap:"1.5rem",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:"0 0 260px"},children:[n.jsx(I,{children:"Company Intelligence"}),(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"1.25rem",boxShadow:s.shadow,border:s.border},children:[n.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:e.name}),n.jsx("div",{style:{color:s.muted,fontSize:"0.78rem",marginBottom:"1rem"},children:e.domain}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[{label:"Industry",value:e.industry},{label:"Size",value:e.size},{label:"Domain",value:e.domain}].map(e=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem"},children:[n.jsx("span",{style:{color:s.muted},children:e.label}),n.jsx("span",{style:{fontWeight:600},children:e.value})]},e.label))}),e.description&&n.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.74rem",color:s.muted,lineHeight:1.5,borderTop:s.border,paddingTop:"0.75rem"},children:e.description}),h&&h.length>0&&(0,n.jsxs)("div",{style:{marginTop:"0.75rem",borderTop:s.border,paddingTop:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"0.65rem",fontWeight:700,color:s.muted,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Key Findings"}),h.map((e,t)=>(0,n.jsxs)("div",{style:{fontSize:"0.72rem",color:s.text,lineHeight:1.5,marginBottom:"0.3rem",display:"flex",gap:"0.4rem"},children:[n.jsx("span",{style:{color:s.blue,flexShrink:0},children:"›"}),n.jsx("span",{children:e})]},t))]}),x&&x.length>0&&(0,n.jsxs)("div",{style:{marginTop:"0.75rem",borderTop:s.border,paddingTop:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"0.65rem",fontWeight:700,color:s.muted,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Sources"}),x.slice(0,4).map((e,t)=>n.jsx("div",{style:{fontSize:"0.65rem",color:s.muted,marginBottom:"0.2rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.jsx("a",{href:"string"==typeof e?e:e.url,target:"_blank",rel:"noreferrer",style:{color:s.blue,textDecoration:"none"},children:"string"==typeof e?e.replace(/^https?:\/\//,"").slice(0,50):(e.title||e.url||"").slice(0,50)})},t))]})]})]}),(0,n.jsxs)("div",{style:{flex:1,minWidth:300},children:[n.jsx(I,{children:"Detected Back-Office Platforms"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:t.map(e=>(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"0.75rem 1rem",boxShadow:s.shadow,border:e.selected?`2px solid ${m[e.id]||s.blue}`:s.border,cursor:"pointer",transition:"border 0.15s",display:"flex",alignItems:"center",gap:"0.75rem"},onClick:()=>r(t=>t.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)),children:[n.jsx("div",{style:{width:18,height:18,borderRadius:4,border:`2px solid ${e.selected?m[e.id]||s.blue:"rgba(0,0,0,0.15)"}`,background:e.selected?m[e.id]||s.blue:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.selected&&n.jsx("span",{style:{color:"#fff",fontSize:"0.7rem",lineHeight:1},children:"✓"})}),n.jsx("span",{style:{fontSize:"1rem"},children:c[e.id]||"\uD83D\uDD27"}),(0,n.jsxs)("div",{style:{flex:1},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.82rem"},children:e.name}),n.jsx("div",{style:{fontSize:"0.7rem",color:s.muted},children:e.reason}),n.jsx(j,{platformId:e.id,options:p[e.id]||[],value:l[e.id]||"",onChange:t=>d(r=>({...r,[e.id]:t}))})]}),n.jsx(i,{color:e.selected?m[e.id]||s.blue:s.faint,children:e.selected?"Selected":"Skip"})]},e.id))}),n.jsx("div",{style:{marginTop:"0.5rem"},children:b?(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("input",{autoFocus:!0,value:v,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D(),"Escape"===e.key&&w(!1)},placeholder:"e.g. Warehouse Management, Billing, POS...",style:{flex:1,background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.45rem 0.7rem",color:s.text,fontFamily:s.mono,fontSize:"0.78rem",outline:"none"}}),n.jsx("button",{onClick:D,style:{...S?.btn,background:s.blue,color:"#fff",border:"none",borderRadius:s.radius,padding:"0.45rem 0.9rem",cursor:"pointer",fontFamily:s.mono,fontSize:"0.75rem"},children:"Add"}),n.jsx("button",{onClick:()=>w(!1),style:{background:"none",border:s.border,borderRadius:s.radius,padding:"0.45rem 0.7rem",cursor:"pointer",color:s.muted,fontFamily:s.mono,fontSize:"0.75rem"},children:"✕"})]}):n.jsx("button",{onClick:()=>w(!0),style:{width:"100%",background:"transparent",border:`1px dashed ${s.muted}`,borderRadius:s.radius,padding:"0.5rem",color:s.muted,fontFamily:s.mono,fontSize:"0.75rem",cursor:"pointer",textAlign:"center"},children:"+ Add custom platform"})}),C>0&&n.jsx("div",{style:{marginTop:"0.75rem"},children:(0,n.jsxs)(a,{onClick:f,style:{width:"100%",padding:"0.75rem",justifyContent:"center"},children:["Build ",C," Platform",1!==C?"s":""," →"]})})]})]})}function v({progress:e,platforms:t}){return(0,n.jsxs)("div",{children:[n.jsx(I,{children:"Building Platform Sandboxes"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(t=>{let r=e[t.id]||{status:"queued",progress:0};return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"1rem 1.25rem",boxShadow:s.shadow,border:s.border},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.6rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{children:c[t.id]||"\uD83D\uDD27"}),n.jsx("span",{style:{fontWeight:600,fontSize:"0.85rem"},children:t.name})]}),n.jsx(i,{color:"done"===r.status?s.mint:"building"===r.status?s.blue:"error"===r.status?s.red:s.faint,children:r.status})]}),n.jsx(l,{value:r.progress||("done"===r.status?100:"building"===r.status?60:15),color:m[t.id]||s.blue}),r.message&&n.jsx("div",{style:{marginTop:"0.4rem",fontSize:"0.7rem",color:s.muted},children:r.message})]},t.id)})}),n.jsx("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:s.muted,fontFamily:s.mono},children:"Building shared SQLite database + Express sandboxes on worker-1..."})]})}function k({platforms:e,sessionId:t,onChat:r,onProposeWorkers:l,proposing:d,showWorkers:c,realClientActive:m}){let[p,u]=(0,o.useState)(null),[g,f]=(0,o.useState)(null);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[n.jsx(I,{style:{marginBottom:0},children:"Platform Canvas"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[m&&n.jsx(i,{color:s.orange,children:"⚡ Real Client Active"}),!c&&n.jsx(a,{onClick:l,disabled:d,small:!0,color:s.purple,children:d?"Analyzing...":"→ Propose Workers"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:"1rem"},children:e.map(e=>n.jsx(D,{platform:e,sessionId:t,highlighted:p===e.id,expanded:g===e.id,onHighlight:()=>u(p===e.id?null:e.id),onExpand:()=>f(g===e.id?null:e.id),onChat:()=>r(e)},e.id))})]})}function D({platform:e,sessionId:t,highlighted:r,expanded:o,onHighlight:d,onExpand:p,onChat:u}){let g=m[e.id]||s.blue,f=o?600:300,h=t&&e.url?`/api/demo/platform-proxy/${t}/${e.id}/`:null;return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,border:r?`2px solid ${g}`:s.border,boxShadow:r?`0 0 0 4px ${g}22, ${s.shadow}`:s.shadow,overflow:"hidden",transition:"all 0.2s",gridColumn:o?"span 2":"span 1"},children:[(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",borderBottom:s.border},children:[n.jsx("span",{style:{fontSize:"1rem"},children:c[e.id]||"\uD83D\uDD27"}),n.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",flex:1},children:e.name}),n.jsx(i,{color:"deployed"===e.status||"ready"===e.status?s.mint:"building"===e.status||"deploying"===e.status?s.blue:"error"===e.status?s.red:s.faint,children:e.status||"ready"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.3rem"},children:[n.jsx(a,{ghost:!0,small:!0,onClick:d,style:{padding:"0.2rem 0.5rem"},children:r?"◉":"○"}),n.jsx(a,{ghost:!0,small:!0,onClick:p,style:{padding:"0.2rem 0.5rem"},children:o?"⊡":"⊞"}),n.jsx(a,{ghost:!0,small:!0,onClick:u,children:"Chat"})]})]}),e.url?n.jsx("div",{style:{background:"#f8f8f8",position:"relative",overflow:"hidden",height:f},children:n.jsx("iframe",{src:h||e.url,style:{width:"100%",height:"100%",border:"none",display:"block"},title:e.name,sandbox:"allow-scripts allow-same-origin allow-forms"})}):n.jsx("div",{style:{height:f,display:"flex",alignItems:"center",justifyContent:"center",background:s.faint},children:(0,n.jsxs)("div",{style:{textAlign:"center",color:s.muted},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:c[e.id]||"\uD83D\uDD27"}),n.jsx("div",{style:{fontSize:"0.75rem",fontFamily:s.mono},children:"building"===e.status?"Building...":"No preview available"}),"building"===e.status&&n.jsx("div",{style:{marginTop:"0.5rem",width:120},children:n.jsx(l,{value:50,color:g})})]})}),e.url&&(0,n.jsxs)("div",{style:{padding:"0.5rem 1rem",borderTop:s.border,display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.url}),n.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.blue,textDecoration:"none"},children:"Open ↗"})]})]})}function C({workers:e,sessionId:t,onDeploy:r,onRun:o,deployingWorker:a,logs:l,fetchLogs:d,activeTab:c,setActiveTab:m,realClientActive:p}){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[n.jsx(I,{style:{marginBottom:0},children:"AI Workers"}),p&&n.jsx(i,{color:s.orange,children:"⚡ Real Client Active"})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"0.85rem"},children:e.map(e=>n.jsx(T,{worker:e,sessionId:t,onDeploy:()=>r(e),onRun:()=>{o(e),d(e.id)},deploying:a===e.id,realClientActive:p},e.id))})]})}let z={"query-platform":"\uD83D\uDD0D","generate-report":"\uD83E\uDD16","send-notification":"\uD83D\uDCE4","call-webhook":"\uD83D\uDD17","run-script":"⚙️","transform-data":"\uD83D\uDD04",condition:"\uD83D\uDD00",wait:"⏱️"},F={schedule:"⏰",webhook:"\uD83D\uDD17",manual:"▶️",message:"\uD83D\uDCAC","platform-event":"\uD83D\uDCE1"};function T({worker:e,sessionId:t,onDeploy:r,onRun:o,deploying:l,realClientActive:d}){let c=e.trigger||{},m=e.steps||[],p=F[c.type]||"⚡";return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,boxShadow:s.shadow,border:s.border,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:"0.85rem 1rem",borderBottom:s.border},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem"},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontWeight:700,fontSize:"0.87rem",marginBottom:"0.25rem"},children:e.name}),n.jsx("div",{style:{fontSize:"0.72rem",color:s.muted,lineHeight:1.4},children:e.description})]}),n.jsx(i,{color:"deployed"===e.status?s.mint:"running"===e.status?s.blue:"error"===e.status?s.red:s.faint,style:{flexShrink:0},children:e.status||"proposed"})]}),(0,n.jsxs)("div",{style:{marginTop:"0.6rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[n.jsx("span",{style:{fontSize:"0.78rem"},children:p}),n.jsx("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted},children:c.label||("string"==typeof e.trigger?e.trigger:c.type||"manual")})]})]}),m.length>0&&n.jsx("div",{style:{padding:"0.6rem 1rem",borderBottom:s.border,display:"flex",alignItems:"center",gap:"0.3rem",overflowX:"auto"},children:m.map((e,t)=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",flexShrink:0},children:[(0,n.jsxs)("div",{style:{background:s.faint,borderRadius:s.radius,padding:"0.25rem 0.5rem",fontSize:"0.62rem",fontFamily:s.mono,display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx("span",{children:z[e.skill]||"●"}),n.jsx("span",{children:e.name||e.skill})]}),t<m.length-1&&n.jsx("span",{style:{color:s.muted,fontSize:"0.7rem"},children:"›"})]},e.id||t))}),(0,n.jsxs)("div",{style:{padding:"0.6rem 1rem",display:"flex",gap:"0.4rem",alignItems:"center"},children:[n.jsx("a",{href:`/worker/${encodeURIComponent(e.id)}?session=${t}`,style:{flex:1,display:"block",textAlign:"center",background:s.faint,border:s.border,borderRadius:s.radius,padding:"0.35rem 0.6rem",fontSize:"0.65rem",fontFamily:s.mono,textTransform:"uppercase",letterSpacing:"0.06em",color:s.text,textDecoration:"none",cursor:"pointer"},children:"View Worker →"}),"deployed"===e.status?n.jsx(a,{small:!0,onClick:o,color:s.blue,children:"▶"}):n.jsx(a,{small:!0,onClick:r,disabled:l,color:s.mint,style:{color:s.text},children:l?"...":"Deploy"})]})]})}function I({children:e,style:t={}}){return n.jsx("div",{style:{color:s.muted,fontSize:"0.6rem",fontFamily:s.mono,textTransform:"uppercase",letterSpacing:"0.12em",marginBottom:"0.75rem",...t},children:e})}},7139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>o});var n=r(9510);let o={title:"H Worker Dashboard"};function s({children:e}){return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)("head",{children:[n.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),n.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),n.jsx("link",{href:"https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Space+Grotesk:wght@300;400;500;600&display=swap",rel:"stylesheet"})]}),n.jsx("body",{style:{margin:0,padding:0},children:e})]})}},169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>a});var n=r(8570);let o=(0,n.createProxy)(String.raw`/tmp/hw-demo/dashboard/app/page.jsx`),{__esModule:s,$$typeof:i}=o;o.default;let a=(0,n.createProxy)(String.raw`/tmp/hw-demo/dashboard/app/page.jsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,4471],()=>r(1991));module.exports=n})();
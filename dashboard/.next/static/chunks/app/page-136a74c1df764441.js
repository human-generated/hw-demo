(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4457:function(e,t,r){Promise.resolve().then(r.bind(r,4413))},4413:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(7437),o=r(2265);let s={bg:"#F4F4F4",card:"#FFFFFF",text:"#0D0D0D",muted:"#888888",faint:"rgba(0,0,0,0.07)",border:"1px solid rgba(0,0,0,0.08)",shadow:"0 2px 12px rgba(0,0,0,0.06)",radius:"4px",mono:"'JetBrains Mono', 'Fira Mono', monospace",ui:"'Space Grotesk', 'Inter', sans-serif",mint:"#6CEFA0",blue:"#6CDDEF",purple:"#B06CEF",orange:"#EF9B6C",red:"#EF4444",yellow:"#F5C842"};function a(e){let{color:t,children:r,style:o={}}=e;return(0,n.jsx)("span",{style:{background:t||s.faint,color:s.text,borderRadius:s.radius,padding:"2px 8px",fontSize:"0.6rem",fontFamily:s.mono,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.06em",display:"inline-block",...o},children:r})}function i(e){let{onClick:t,children:r,ghost:o,small:a,disabled:i,color:l,style:d={}}=e;return(0,n.jsx)("button",{onClick:t,disabled:i,style:{background:o?s.card:l||s.text,color:o?s.muted:"#fff",border:o?"1px solid rgba(0,0,0,0.1)":"none",borderRadius:s.radius,padding:a?"0.3rem 0.75rem":"0.5rem 1.2rem",cursor:i?"not-allowed":"pointer",opacity:i?.5:1,fontFamily:s.mono,fontSize:a?"0.62rem":"0.7rem",textTransform:"uppercase",letterSpacing:"0.06em",transition:"opacity 0.15s",whiteSpace:"nowrap",...d},children:r})}function l(e){let{value:t=0,color:r=s.mint}=e;return(0,n.jsx)("div",{style:{background:s.faint,borderRadius:99,height:6,overflow:"hidden",width:"100%"},children:(0,n.jsx)("div",{style:{width:"".concat(Math.min(100,t),"%"),height:"100%",background:r,borderRadius:99,transition:"width 0.4s ease"}})})}let d=["start","research","building","platforms","workers"],c={crm:"\uD83D\uDC65",support:"\uD83C\uDFAB",analytics:"\uD83D\uDCCA",erp:"\uD83D\uDCE6",ecommerce:"\uD83D\uDED2",hr:"\uD83E\uDDD1‍\uD83D\uDCBC",messaging:"\uD83D\uDCAC"},m={crm:s.blue,support:s.orange,analytics:s.purple,erp:s.mint,ecommerce:s.yellow,hr:s.red,messaging:"#aaa"},u={crm:["Salesforce Sales Cloud","Microsoft Dynamics 365 CRM","HubSpot CRM","SAP CRM","Oracle Siebel CRM","Zoho CRM","SugarCRM"],erp:["SAP S/4HANA","Microsoft Dynamics 365 Finance","Oracle Fusion ERP","NetSuite","Odoo","Sage X3","Infor CloudSuite"],support:["Zendesk Suite","Freshdesk","ServiceNow CSM","Jira Service Management","Intercom","HubSpot Service Hub","Salesforce Service Cloud"],analytics:["Power BI","Tableau","Looker (Google)","SAP Analytics Cloud","Qlik Sense","Metabase","Sisense"],ecommerce:["Adobe Commerce (Magento)","SAP Commerce Cloud","Shopify Plus","BigCommerce","Salesforce Commerce Cloud","WooCommerce","Proprietary"],hr:["SAP SuccessFactors","Workday HCM","Oracle HCM Cloud","ADP Workforce Now","BambooHR","UKG Pro","Charisma HCM"],messaging:["Microsoft Teams","Slack","Google Workspace","Zoom Team Chat","Webex"]};function p(e){let{currentId:t,onSelect:r,onDelete:a,onClose:i}=e,[l,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(null);function u(){fetch("/api/demo/sessions").then(e=>e.json()).then(d).catch(()=>d([]))}(0,o.useEffect)(()=>{u()},[]);let p={start:s.muted,research:s.blue,building:s.orange,platforms:s.mint,workers:s.purple};async function f(e,t){e.stopPropagation(),confirm("Delete this session?")&&(m(t),await fetch("/api/demo/session/".concat(t),{method:"DELETE"}),a(t),u(),m(null))}return(0,n.jsxs)("div",{style:{position:"fixed",top:52,right:0,width:340,bottom:0,background:s.card,borderLeft:s.border,boxShadow:"-4px 0 24px rgba(0,0,0,0.08)",display:"flex",flexDirection:"column",zIndex:100},children:[(0,n.jsxs)("div",{style:{padding:"1rem 1.25rem 0.75rem",borderBottom:s.border,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.06em"},children:"Sessions"}),(0,n.jsx)("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",color:s.muted,fontSize:"1rem",lineHeight:1},children:"✕"})]}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"0.5rem"},children:[null===l&&(0,n.jsx)("div",{style:{padding:"1rem",textAlign:"center",color:s.muted,fontFamily:s.mono,fontSize:"0.7rem"},children:"Loading…"}),null!==l&&0===l.length&&(0,n.jsx)("div",{style:{padding:"1rem",textAlign:"center",color:s.muted,fontFamily:s.mono,fontSize:"0.7rem"},children:"No sessions yet"}),(l||[]).map(e=>{let o=e.id===t,a=e.phase||"start",l=e.updatedAt?(()=>{let t=Date.now()-new Date(e.updatedAt).getTime();return t<6e4?"just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")})():"",d=e.power&&e.power.totalWh>0?e.power.totalWh<.001?"".concat((1e6*e.power.totalWh).toFixed(0),"\xb5Wh"):e.power.totalWh<1?"".concat((1e3*e.power.totalWh).toFixed(2),"mWh"):"".concat(e.power.totalWh.toFixed(3),"Wh"):null;return(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",borderRadius:s.radius,marginBottom:4,background:o?s.faint:"transparent",border:o?"1px solid rgba(0,0,0,0.1)":"1px solid transparent",transition:"background 0.15s"},onMouseEnter:e=>{o||(e.currentTarget.style.background=s.faint)},onMouseLeave:e=>{o||(e.currentTarget.style.background="transparent")},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[(0,n.jsx)("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.72rem"},children:e.company||(0,n.jsx)("span",{style:{color:s.muted},children:"Unnamed"})}),(0,n.jsx)("span",{style:{fontFamily:s.mono,fontSize:"0.58rem",fontWeight:700,textTransform:"uppercase",color:p[a]||s.muted},children:a})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:s.muted,fontFamily:s.mono,fontSize:"0.62rem",flexWrap:"wrap"},children:[(0,n.jsxs)("span",{children:[e.id.slice(0,10),"…"]}),(0,n.jsx)("span",{children:"\xb7"}),(0,n.jsxs)("span",{children:[e.platforms,"P ",e.workers,"W"]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"\xb7"}),(0,n.jsxs)("span",{style:{color:s.mint},children:["⚡ ",d]})]}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"\xb7"}),(0,n.jsx)("span",{children:l})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.4rem",marginTop:"0.5rem"},children:[!o&&(0,n.jsx)("button",{onClick:()=>{r(e.id),i()},style:{flex:1,background:s.text,color:"#fff",border:"none",borderRadius:s.radius,padding:"0.25rem 0.5rem",fontFamily:s.mono,fontSize:"0.6rem",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer"},children:"Resume"}),o&&(0,n.jsx)("div",{style:{flex:1,fontSize:"0.58rem",fontFamily:s.mono,color:s.mint,fontWeight:700,display:"flex",alignItems:"center"},children:"● CURRENT"}),(0,n.jsx)("button",{onClick:t=>f(t,e.id),disabled:c===e.id,style:{background:"none",border:"1px solid rgba(239,68,68,0.3)",borderRadius:s.radius,padding:"0.25rem 0.6rem",fontFamily:s.mono,fontSize:"0.6rem",color:s.red,cursor:"pointer",opacity:c===e.id?.5:1},children:"Delete"})]})]},e.id)})]})]})}function f(){let[e,t]=(0,o.useState)(null),[r,l]=(0,o.useState)("start"),[c,m]=(0,o.useState)([{role:"assistant",content:"Welcome to H-Demo. Enter a company name to begin your AI back-office simulation."}]),[f,h]=(0,o.useState)({tokens:0,requests:0,estimatedCostUsd:0}),[j,D]=(0,o.useState)({totalWh:0,runs:0}),[z,I]=(0,o.useState)(""),[F,T]=(0,o.useState)(!1),[W,R]=(0,o.useState)(!1),[B,A]=(0,o.useState)([]),[_,E]=(0,o.useState)(null),[P,O]=(0,o.useState)([]),[M,N]=(0,o.useState)({}),[H,L]=(0,o.useState)(""),[J,U]=(0,o.useState)([]),[K,q]=(0,o.useState)([]),[V,Y]=(0,o.useState)(""),[G,Z]=(0,o.useState)({}),[Q,X]=(0,o.useState)([]),[$,ee]=(0,o.useState)(null),[et,er]=(0,o.useState)(""),[en,eo]=(0,o.useState)([]),[es,ea]=(0,o.useState)(!1),[ei,el]=(0,o.useState)([]),[ed,ec]=(0,o.useState)({}),[em,eu]=(0,o.useState)({}),[ep,ef]=(0,o.useState)(null),[eg,eh]=(0,o.useState)(!1),[ey,ex]=(0,o.useState)(!1),[eb,ej]=(0,o.useState)(""),[ew,eS]=(0,o.useState)(""),[ev,ek]=(0,o.useState)(""),[eD,eC]=(0,o.useState)(!1),ez=(0,o.useRef)(null);async function eI(){try{let e=localStorage.getItem("hw-demo-session");if(e){let r=await fetch("/api/demo/session/".concat(e));if(r.ok){let n=await r.json();if(n&&n.phase&&"start"!==n.phase){t(e),eF(n);return}}localStorage.removeItem("hw-demo-session")}let r=await fetch("/api/demo/session",{method:"POST"}),n=await r.json();n.sessionId&&(t(n.sessionId),localStorage.setItem("hw-demo-session",n.sessionId))}catch(e){}}function eF(e){let t=e.phase||"start";if(l(t),e.company&&E(e.company),e.usage&&h(e.usage),e.power&&D(e.power),e.researchSummary&&L(e.researchSummary),e.researchFindings&&U(e.researchFindings),e.platforms&&e.platforms.length>0){O(e.platforms);let t=e.platforms.filter(e=>"deployed"===e.status||"building"===e.status);t.length>0&&X(t)}e.workers&&e.workers.length>0&&el(e.workers);let r=(e.platforms||[]).filter(e=>"deployed"===e.status).length,n=(e.workers||[]).length;eT("assistant","Session restored.".concat(e.company?" Company: ".concat(e.company.name,"."):"").concat(r?" ".concat(r," platform").concat(r>1?"s":""," deployed."):"").concat(n?" ".concat(n," worker").concat(n>1?"s":""," configured."):""," Phase: ").concat(t,"."),"agent:info")}function eT(e,t,r){m(n=>[...n,{role:e,content:t,tag:r,at:new Date().toISOString()}])}async function eW(t){let r=(t||"").trim();if(r){T(!0),l("research"),eT("user",r),eT("assistant","Researching ".concat(r,"..."),"agent:research");try{let t=await fetch("/api/demo/research",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company:r,sessionId:e})}),n=await t.json();if(n.company){E(n.company);let e=n.platforms||[];O(e);let t={};e.forEach(e=>{let r=u[e.id]||[],n=e.actual_software&&"To be determined"!==e.actual_software&&"Unknown"!==e.actual_software&&!e.actual_software.startsWith("Unknown");t[e.id]=n?e.actual_software:r[0]||""}),N(t),L(n.summary||""),U(n.key_findings||[]),q(n.citations||[]),Y(n.raw_research||"");let r=(n.platforms||[]).filter(e=>e.selected),o=r.filter(e=>e.actual_software&&"To be determined"!==e.actual_software).map(e=>"".concat(e.name," (").concat(e.actual_software,")")),s=["**".concat(n.company.name,"** — ").concat(n.company.industry,", ").concat(n.company.country||"",", ").concat(n.company.size||""),n.summary,o.length?"Identified tools: ".concat(o.join(", "),"."):"","\nSelected ".concat(r.length," platforms to simulate. Confirm or adjust below, then click Build.")].filter(Boolean).join("\n");eT("assistant",s,"agent:done")}else eT("assistant",n.error||"Research failed. Try again.","agent:error"),l("start")}catch(e){eT("assistant","Research error: "+e.message,"agent:error"),l("start")}T(!1)}}async function eR(){let t=P.filter(e=>e.selected);if(!t.length)return;l("building"),eT("assistant","Building ".concat(t.length," platform sandboxes with shared database..."),"agent:build");let r={};t.forEach(e=>{r[e.id]={status:"queued",progress:0,name:e.name}}),Z(r);try{let r=await fetch("/api/demo/build-platforms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,platforms:t.map(e=>({...e,software:M[e.id]||e.actual_software||""})),realClient:eD?{name:eb,email:ew,phone:ev}:null})}),n=await r.json();n.platforms&&(X(n.platforms),eT("assistant","All ".concat(n.platforms.length," platforms deployed. You can preview and customize each one."),"agent:done"),l("platforms"))}catch(e){eT("assistant","Build error: "+e.message,"agent:error")}}async function eB(){if(et.trim()&&$){er(""),eo(e=>[...e,{role:"user",content:et}]),ea(!0);try{let t=await fetch("/api/demo/platforms/".concat($.sandboxId,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:et,sessionId:e})}),r=await t.json();eo(e=>[...e,{role:"assistant",content:r.message||r.error||"Done."}])}catch(e){eo(t=>[...t,{role:"assistant",content:"Error: "+e.message}])}ea(!1)}}async function eA(){eh(!0),eT("assistant","Spawning ".concat(Q.length," parallel Worker Proposal Agents — one per platform..."),"agent:analyze"),A(e=>{let t=e.find(e=>"worker-proposal-agent"===e.role)||{id:"wpa-root-"+Date.now(),name:"Worker Proposal Agent",icon:"\uD83E\uDD16",role:"worker-proposal-agent",parentId:null,status:"running",task:"Propose workers"},r=e.some(e=>"worker-proposal-agent"===e.role),n=Q.map((e,r)=>({id:"wpa-sub-".concat(Date.now(),"-").concat(r),name:"".concat(e.name," Worker Agent"),icon:"⚙️",role:"worker-agent-".concat(e.id),parentId:t.id,status:"running",task:"Design worker for ".concat(e.name)}));return r?[...e,...n]:[...e,t,...n]});try{let t=await fetch("/api/demo/workers/propose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,platforms:Q})}),r=await t.json();if(r.workers){el(r.workers),l("workers"),A(e=>e.map(e=>e.role.startsWith("worker-agent-")?{...e,status:"done"}:"worker-proposal-agent"===e.role?{...e,status:"done"}:e));let e=r.workers.filter(e=>e.redelegated).length,t=e>0?"".concat(r.workers.length," workers proposed (").concat(e,' re-delegated via fallback). Click "View Worker →" to configure each.'):"".concat(r.workers.length,' workers proposed by parallel agents. Click "View Worker →" to configure each via chat.');eT("assistant",t,"agent:done")}}catch(e){eT("assistant","Proposal error: "+e.message,"agent:error")}eh(!1)}async function e_(t){ef(t.id);try{let r=await fetch("/api/demo/workers/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,worker:t,realClient:eD?{name:eb,email:ew,phone:ev}:null})}),n=await r.json();el(e=>e.map(e=>e.id===t.id?{...e,status:n.status||"deployed",pid:n.pid}:e)),eT("assistant",'Worker "'.concat(t.name,'" deployed. ').concat(n.message||""),"agent:done")}catch(e){eT("assistant","Deploy error: "+e.message,"agent:error")}ef(null)}async function eE(t){try{let r=await fetch("/api/demo/workers/".concat(t.id,"/run"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e})}),n=await r.json();eT("assistant",'Worker "'.concat(t.name,'" triggered. ').concat(n.result||""),"agent:done"),eP(t.id)}catch(e){}}async function eP(t){try{let r=await fetch("/api/demo/workers/".concat(t,"/logs?sessionId=").concat(e)),n=await r.json();eu(e=>({...e,[t]:n.logs||[]}))}catch(e){}}async function eO(){let t=z.trim();if(t&&!F){I(""),eT("user",t),T(!0);try{var r,n;let s=await fetch("/api/demo/orchestrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,message:t})}),a=await s.json(),i=a.action||{type:"none",params:{}};if(a.usage&&h(a.usage),a.plan&&a.plan.length>0){let e={id:"orchestrator-"+Date.now(),name:"Orchestrator",icon:"\uD83E\uDDE0",role:"orchestrator",parentId:null,status:"done",task:t},r=a.plan.map((t,r)=>{var n,o,s;return{id:"agent-".concat(Date.now(),"-").concat(r),name:t.agent||"Agent ".concat(r+1),icon:(null===(n=t.agent)||void 0===n?void 0:n.includes("Research"))?"\uD83D\uDD0D":(null===(o=t.agent)||void 0===o?void 0:o.includes("Build"))?"\uD83C\uDFD7️":(null===(s=t.agent)||void 0===s?void 0:s.includes("Worker"))?"\uD83E\uDD16":"⚙️",role:(t.agent||"").toLowerCase().replace(/\s+/g,"-"),parentId:e.id,status:"pending",task:t.task,step:t.step}});A([e,...r]);let n=a.plan.map(e=>"".concat(e.step,". ").concat(e.task," → ").concat(e.agent)).join("\n");eT("assistant","Task decomposition:\n".concat(n),"agent:plan")}function o(e,t,r){A(n=>{let o=n.map(r=>r.role===e?{...r,status:t}:r);if(r){let t=o.find(t=>t.role===e);if(t){let e=r.map((e,r)=>({id:"sub-".concat(Date.now(),"-").concat(r),name:e.name,icon:e.icon||"\uD83D\uDD27",role:e.role,parentId:t.id,status:e.status||"running",task:e.task}));o=[...o,...e]}}return o})}if(a.message&&eT("assistant",a.message,"agent:orchestrator"),"full_setup"===i.type){let e=(null===(r=i.params)||void 0===r?void 0:r.company)||t;T(!1),o("orchestrator","delegating"),eT("assistant","Starting full setup — delegating to Research Agent...","agent:orchestrator"),await eW(e);return}if("start_research"===i.type){let e=(null===(n=i.params)||void 0===n?void 0:n.company)||t;T(!1),o("research-agent","running"),eW(e);return}if("build_platforms"===i.type){T(!1),o("build-agent","running"),eR();return}if("propose_workers"===i.type){T(!1),o("worker-proposal-agent","running"),eA();return}else if("modify_platforms"===i.type){let{add:e=[],remove:t=[]}=i.params||{};O(r=>{let n=r.map(r=>t.map(e=>e.toLowerCase()).some(e=>r.name.toLowerCase().includes(e)||r.id.includes(e))?{...r,selected:!1}:t.length&&e.map(e=>e.toLowerCase()).some(e=>r.name.toLowerCase().includes(e)||r.id.includes(e))?{...r,selected:!0}:r);return e.forEach(e=>{let t="custom-"+e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");n.find(r=>r.id===t||r.name.toLowerCase()===e.toLowerCase())||(n=[...n,{id:t,name:e,reason:"Added by user",selected:!0,custom:!0}])}),n})}}catch(e){eT("assistant","Error: "+e.message,"agent:error")}T(!1)}}function eM(){localStorage.removeItem("hw-demo-session"),t(null),l("start"),m([{role:"assistant",content:"New session started. Enter a company name to begin."}]),E(null),O([]),X([]),el([]),Z({}),eC(!1),A([]),eI()}return(0,o.useRef)(null),(0,o.useEffect)(()=>{var e;null===(e=ez.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[c]),(0,o.useEffect)(()=>{eI()},[]),(0,o.useEffect)(()=>{if(!e)return;let t=setInterval(async()=>{try{let t=await fetch("/api/demo/session/".concat(e)),n=await t.json();if(n.platforms){let e=n.platforms.map(e=>({...e}));X(t=>{let r=[...t];return e.forEach(e=>{let t=r.findIndex(t=>t.id===e.id);t>=0?r[t]={...r[t],...e}:r.push(e)}),r})}n.phase&&n.phase!==r&&l(n.phase),n.usage&&h(n.usage),n.power&&D(n.power)}catch(e){}},3e3);return()=>clearInterval(t)},[e]),(0,n.jsxs)("div",{style:{fontFamily:s.ui,background:s.bg,color:s.text,height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,n.jsxs)("div",{style:{background:s.card,borderBottom:s.border,padding:"0 1.5rem",height:52,display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,boxShadow:s.shadow},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,n.jsx)("span",{style:{fontFamily:s.mono,fontWeight:700,fontSize:"0.95rem",letterSpacing:"-0.02em"},children:"H-Demo"}),(0,n.jsx)("span",{style:{color:s.muted,fontSize:"0.7rem",fontFamily:s.mono},children:"AI Back-Office Simulator"}),e&&(0,n.jsx)(a,{color:s.faint,style:{color:s.muted},children:e.slice(0,8)})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,n.jsx)("div",{style:{display:"flex",gap:"0.25rem",alignItems:"center"},children:d.filter(e=>"start"!==e).map((e,t,o)=>{let a=d.indexOf(r),i=d.indexOf(e),c=r===e,m=a>i,u=m||c;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.2rem"},children:[(0,n.jsxs)("div",{onClick:()=>u&&l(e),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.25rem 0.5rem",borderRadius:s.radius,background:c?s.text:m?"rgba(108,239,160,0.15)":"transparent",border:c?"none":m?"1px solid rgba(108,239,160,0.4)":"1px solid transparent",cursor:u?"pointer":"default",transition:"all 0.15s"},children:[(0,n.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",flexShrink:0,background:c?"#fff":m?s.mint:s.faint}}),(0,n.jsx)("span",{style:{fontSize:"0.6rem",fontFamily:s.mono,fontWeight:c?700:400,color:c?"#fff":m?s.mint:s.muted,textTransform:"uppercase",whiteSpace:"nowrap"},children:"start"===e?"Start":"research"===e?"Research":"building"===e?"Building":"platforms"===e?"Platforms":"workers"===e?"Workers":e})]}),t<o.length-1&&(0,n.jsx)("span",{style:{color:s.faint,fontSize:"0.75rem"},children:"›"})]},e)})}),(0,n.jsx)(i,{ghost:!0,small:!0,onClick:()=>R(e=>!e),children:"Sessions"}),(0,n.jsx)(i,{ghost:!0,small:!0,onClick:eM,children:"New Session"})]})]}),W&&(0,n.jsx)(p,{currentId:e,onClose:()=>R(!1),onDelete:t=>{t===e&&eM()},onSelect:async r=>{if(r===e)return;let n=await fetch("/api/demo/session/".concat(r));if(!n.ok)return;let o=await n.json();localStorage.setItem("hw-demo-session",r),t(r),A([]),eF(o)}}),(0,n.jsxs)("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[(0,n.jsx)("div",{style:{width:380,display:"flex",flexDirection:"column",borderRight:s.border,background:s.card,flexShrink:0},children:$?(0,n.jsx)(b,{platform:$,history:en,input:et,setInput:er,onSend:eB,loading:es,onBack:()=>{ee(null),eo([])}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.map((e,t)=>(0,n.jsx)(x,{msg:e},t)),(0,n.jsx)("div",{ref:ez})]}),(0,n.jsx)(y,{nodes:B,onClear:()=>A([])}),(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.75rem 1rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{value:z,onChange:e=>I(e.target.value),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eO())},placeholder:"start"===r?"Enter company name...":"Chat with orchestrator...",disabled:F,style:{flex:1,background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.5rem 0.75rem",fontFamily:s.mono,fontSize:"0.8rem",color:s.text,outline:"none"}}),(0,n.jsx)(i,{onClick:eO,disabled:F||!z.trim(),small:!0,children:F?"...":"→"})]}),(f.tokens>0||j.totalWh>0)&&(0,n.jsxs)("div",{style:{marginTop:"0.4rem",display:"flex",gap:"0.75rem",fontSize:"0.58rem",fontFamily:s.mono,color:s.muted,opacity:.7,flexWrap:"wrap"},children:[f.tokens>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{children:["↑",f.inputTokens||0," ↓",f.outputTokens||0," tokens"]}),(0,n.jsxs)("span",{children:[f.requests||0," agent calls"]}),(0,n.jsxs)("span",{style:{color:s.orange},children:["$",(f.estimatedCostUsd||0).toFixed(4)]})]}),j.totalWh>0&&(0,n.jsxs)("span",{style:{color:"#6CEFA0"},children:["⚡ ",(1e3*j.totalWh).toFixed(3)," mWh \xb7 ",j.runs||0," runs"]})]}),(0,n.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",padding:"0.3rem 0"},onClick:()=>ex(!ey),children:[(0,n.jsxs)("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,textTransform:"uppercase",letterSpacing:"0.08em"},children:["Real Client Data ",eD&&(0,n.jsx)("span",{style:{color:s.orange},children:"● Active"})]}),(0,n.jsx)("span",{style:{color:s.muted,fontSize:"0.7rem"},children:ey?"▲":"▼"})]}),ey&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.5rem"},children:[(0,n.jsx)("input",{value:eb,onChange:e=>ej(e.target.value),placeholder:"Name",style:g}),(0,n.jsx)("input",{value:ew,onChange:e=>eS(e.target.value),placeholder:"Email",style:g}),(0,n.jsx)("input",{value:ev,onChange:e=>ek(e.target.value),placeholder:"Phone",style:g}),(0,n.jsx)(i,{small:!0,onClick:function(){(eb||ew||ev)&&(eC(!0),eT("assistant","Real client data set: ".concat(eb," (").concat(ew,"). Workers will use this contact."),"agent:info"))},children:"Set as Real Client"})]})]})]})]})}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.5rem"},children:["start"===r&&(0,n.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{maxWidth:480,textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,textTransform:"uppercase",letterSpacing:"0.15em",marginBottom:"1rem"},children:"AI Back-Office Simulator"}),(0,n.jsx)("h1",{style:{fontSize:"2rem",fontWeight:700,marginBottom:"0.75rem",letterSpacing:"-0.03em"},children:"Type a company name to begin"}),(0,n.jsx)("p",{style:{color:s.muted,fontSize:"0.88rem",lineHeight:1.6,marginBottom:"2rem"},children:"The orchestrator will research the company, detect back-office platforms, build live sandboxes, and deploy AI workers — all through chat."}),(0,n.jsx)("div",{style:{display:"flex",gap:"2rem",justifyContent:"center"},children:[{icon:"\uD83D\uDD0D",label:"Research",desc:"AI discovers platforms"},{icon:"\uD83C\uDFD7️",label:"Build",desc:"Live sandbox per platform"},{icon:"\uD83E\uDD16",label:"Automate",desc:"Workers with real triggers"}].map(e=>(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"0.4rem"},children:e.icon}),(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"0.8rem",marginBottom:"0.2rem"},children:e.label}),(0,n.jsx)("div",{style:{color:s.muted,fontSize:"0.7rem"},children:e.desc})]},e.label))})]})}),"research"===r&&(0,n.jsx)(w,{company:_,platforms:P,setPlatforms:O,platformSoftware:M,setPlatformSoftware:N,summary:H,loading:F,onBuild:eR,findings:J,citations:K,rawResearch:V}),"building"===r&&(0,n.jsx)(v,{progress:G,platforms:P.filter(e=>e.selected)}),("platforms"===r||"workers"===r)&&Q.length>0&&(0,n.jsx)(k,{platforms:Q,sessionId:e,onChat:e=>{ee(e),eo([])},onProposeWorkers:eA,proposing:eg,showWorkers:"workers"===r,realClientActive:eD}),"workers"===r&&ei.length>0&&(0,n.jsx)(C,{workers:ei,sessionId:e,onDeploy:e_,onRun:eE,deployingWorker:ep,logs:em,fetchLogs:eP,activeTab:ed,setActiveTab:ec,realClientActive:eD})]})]})]})}let g={background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.4rem 0.6rem",fontFamily:s.mono,fontSize:"0.75rem",color:s.text,outline:"none",width:"100%"},h={running:s.blue,done:s.mint,pending:s.muted,delegating:s.orange,error:s.red};function y(e){let{nodes:t,onClear:r}=e;if(!t||0===t.length)return null;let o=t.filter(e=>!e.parentId);return(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.5rem 1rem 0.25rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.35rem"},children:[(0,n.jsx)("span",{style:{fontFamily:s.mono,fontSize:"0.6rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",color:s.muted},children:"Agent Delegation"}),(0,n.jsx)("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",color:s.muted,fontSize:"0.65rem",fontFamily:s.mono},children:"clear"})]}),o.map(e=>(function e(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.filter(e=>e.parentId===r.id);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",paddingLeft:18*o,paddingTop:4,paddingBottom:4},children:[o>0&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:2},children:[(0,n.jsx)("div",{style:{width:1,height:8,background:"rgba(0,0,0,0.12)"}}),(0,n.jsx)("div",{style:{width:8,height:1,background:"rgba(0,0,0,0.12)",marginLeft:-4}})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flex:1},children:[(0,n.jsx)("span",{style:{fontSize:"0.85rem",lineHeight:1},children:r.icon}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[(0,n.jsx)("span",{style:{fontFamily:s.mono,fontSize:"0.65rem",fontWeight:700},children:r.name}),(0,n.jsx)("span",{style:{width:6,height:6,borderRadius:"50%",background:h[r.status]||s.muted,flexShrink:0}}),(0,n.jsx)("span",{style:{fontFamily:s.mono,fontSize:"0.55rem",color:s.muted,textTransform:"uppercase"},children:r.status})]}),r.task&&(0,n.jsx)("div",{style:{fontFamily:s.mono,fontSize:"0.6rem",color:s.muted,marginTop:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.task})]})]})]}),a.map(t=>e(t,o+1))]},r.id)})(e))]})}function x(e){let{msg:t}=e,r="user"===t.role;return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:r?"flex-end":"flex-start",gap:"0.25rem"},children:[t.tag&&(0,n.jsx)(a,{color:"agent:done"===t.tag?s.mint:"agent:error"===t.tag?s.red:"agent:build"===t.tag?s.blue:"agent:analyze"===t.tag?s.purple:"agent:orchestrator"===t.tag?s.orange:"agent:plan"===t.tag?s.purple:s.faint,style:{marginBottom:2},children:t.tag.replace("agent:","")}),(0,n.jsx)("div",{style:{maxWidth:"90%",background:r?s.text:s.card,color:r?"#fff":s.text,borderRadius:s.radius,padding:"0.6rem 0.9rem",fontSize:"0.82rem",lineHeight:1.5,boxShadow:s.shadow,border:r?"none":s.border,fontFamily:"agent:plan"===t.tag?s.mono:s.ui,whiteSpace:"agent:plan"===t.tag?"pre-wrap":"normal"},children:t.content})]})}function b(e){let{platform:t,history:r,input:a,setInput:l,onSend:d,loading:m,onBack:u}=e,p=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]),(0,n.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",borderBottom:s.border,display:"flex",alignItems:"center",gap:"0.75rem",background:s.faint},children:[(0,n.jsx)(i,{ghost:!0,small:!0,onClick:u,children:"← Back"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontFamily:s.mono,fontSize:"0.7rem",fontWeight:700},children:[c[t.id]||"\uD83D\uDD27"," ",t.name," Agent"]}),(0,n.jsx)("div",{style:{fontSize:"0.62rem",color:s.muted},children:"Ask to customize this platform"})]})]}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[0===r.length&&(0,n.jsx)("div",{style:{color:s.muted,fontSize:"0.78rem",fontStyle:"italic"},children:'Ask me to modify this platform: "add a revenue chart", "change colors to dark", "add search bar"'}),r.map((e,t)=>(0,n.jsx)(x,{msg:e},t)),m&&(0,n.jsx)("div",{style:{color:s.muted,fontSize:"0.75rem",fontStyle:"italic"},children:"Building..."}),(0,n.jsx)("div",{ref:p})]}),(0,n.jsxs)("div",{style:{borderTop:s.border,padding:"0.75rem",display:"flex",gap:"0.5rem"},children:[(0,n.jsx)("input",{value:a,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d()},placeholder:"Customize this platform...",style:{...g,flex:1}}),(0,n.jsx)(i,{small:!0,onClick:d,disabled:m||!a.trim(),children:"→"})]})]})}function j(e){let{platformId:t,options:r,value:a,onChange:i}=e,l=r.includes(a),d=a&&!l?"__custom__":a||r[0]||"",[c,m]=(0,o.useState)(!l&&a?a:"");return(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{marginTop:"0.4rem"},children:[r.length>0&&(0,n.jsxs)("select",{value:d,onChange:e=>{"__custom__"===e.target.value?i(c||"__custom__"):i(e.target.value)},style:{width:"100%",background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.22rem 0.4rem",fontFamily:s.mono,fontSize:"0.63rem",color:s.text,cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[r.map(e=>(0,n.jsx)("option",{value:e,children:e},e)),(0,n.jsx)("option",{value:"__custom__",children:"Custom..."})]}),"__custom__"===d&&(0,n.jsx)("input",{type:"text",value:c,autoFocus:r.length>0,onChange:e=>{m(e.target.value),i(e.target.value||"__custom__")},placeholder:"e.g. Oracle EBS, Custom-built...",style:{marginTop:r.length>0?"0.3rem":0,width:"100%",background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.22rem 0.4rem",fontFamily:s.mono,fontSize:"0.63rem",color:s.text,outline:"none",boxSizing:"border-box"}})]})}function w(e){var t;let{company:r,platforms:l,setPlatforms:d,platformSoftware:p,setPlatformSoftware:f,summary:g,loading:h,onBuild:y,findings:x,citations:b,rawResearch:w}=e,[v,k]=(0,o.useState)(!1),[D,C]=(0,o.useState)("");function z(){let e=D.trim();if(!e)return;let t="custom-"+e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");d(r=>[...r,{id:t,name:e,reason:"Custom platform added by user",actual_software:e,selected:!0,custom:!0}]),C(""),k(!1)}if(h||!r)return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"1rem"},children:[(0,n.jsx)("div",{style:{fontFamily:s.mono,fontSize:"0.8rem",color:s.muted},children:"Researching company intelligence..."}),(0,n.jsx)("div",{style:{display:"flex",gap:"0.4rem"},children:[0,1,2].map(e=>(0,n.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:s.blue,animation:"pulse ".concat(.6+.2*e,"s ease-in-out infinite alternate")}},e))}),(0,n.jsx)("style",{children:"@keyframes pulse { from { opacity: 0.3; transform: scale(0.8); } to { opacity: 1; transform: scale(1.2); } }"})]});let I=l.filter(e=>e.selected).length;return(0,n.jsxs)("div",{style:{display:"flex",gap:"1.5rem",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:"0 0 260px"},children:[(0,n.jsx)(T,{children:"Company Intelligence"}),(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"1.25rem",boxShadow:s.shadow,border:s.border},children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:r.name}),(0,n.jsx)("div",{style:{color:s.muted,fontSize:"0.78rem",marginBottom:"1rem"},children:r.domain}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[{label:"Industry",value:r.industry},{label:"Size",value:r.size},{label:"Domain",value:r.domain}].map(e=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem"},children:[(0,n.jsx)("span",{style:{color:s.muted},children:e.label}),(0,n.jsx)("span",{style:{fontWeight:600},children:e.value})]},e.label))}),r.description&&(0,n.jsx)("div",{style:{marginTop:"0.75rem",fontSize:"0.74rem",color:s.muted,lineHeight:1.5,borderTop:s.border,paddingTop:"0.75rem"},children:r.description}),x&&x.length>0&&(0,n.jsxs)("div",{style:{marginTop:"0.75rem",borderTop:s.border,paddingTop:"0.75rem"},children:[(0,n.jsx)("div",{style:{fontSize:"0.65rem",fontWeight:700,color:s.muted,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Key Findings"}),x.map((e,t)=>(0,n.jsxs)("div",{style:{fontSize:"0.72rem",color:s.text,lineHeight:1.5,marginBottom:"0.3rem",display:"flex",gap:"0.4rem"},children:[(0,n.jsx)("span",{style:{color:s.blue,flexShrink:0},children:"›"}),(0,n.jsx)("span",{children:e})]},t))]}),b&&b.length>0&&(0,n.jsxs)("div",{style:{marginTop:"0.75rem",borderTop:s.border,paddingTop:"0.75rem"},children:[(0,n.jsx)("div",{style:{fontSize:"0.65rem",fontWeight:700,color:s.muted,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Sources"}),b.slice(0,4).map((e,t)=>(0,n.jsx)("div",{style:{fontSize:"0.65rem",color:s.muted,marginBottom:"0.2rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,n.jsx)("a",{href:"string"==typeof e?e:e.url,target:"_blank",rel:"noreferrer",style:{color:s.blue,textDecoration:"none"},children:"string"==typeof e?e.replace(/^https?:\/\//,"").slice(0,50):(e.title||e.url||"").slice(0,50)})},t))]})]})]}),(0,n.jsxs)("div",{style:{flex:1,minWidth:300},children:[(0,n.jsx)(T,{children:"Detected Back-Office Platforms"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:l.map(e=>(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"0.75rem 1rem",boxShadow:s.shadow,border:e.selected?"2px solid ".concat(m[e.id]||s.blue):s.border,cursor:"pointer",transition:"border 0.15s",display:"flex",alignItems:"center",gap:"0.75rem"},onClick:()=>d(t=>t.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)),children:[(0,n.jsx)("div",{style:{width:18,height:18,borderRadius:4,border:"2px solid ".concat(e.selected?m[e.id]||s.blue:"rgba(0,0,0,0.15)"),background:e.selected?m[e.id]||s.blue:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.selected&&(0,n.jsx)("span",{style:{color:"#fff",fontSize:"0.7rem",lineHeight:1},children:"✓"})}),(0,n.jsx)("span",{style:{fontSize:"1rem"},children:c[e.id]||"\uD83D\uDD27"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{fontWeight:600,fontSize:"0.82rem"},children:e.name}),(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:s.muted},children:e.reason}),(0,n.jsx)(j,{platformId:e.id,options:u[e.id]||[],value:p[e.id]||"",onChange:t=>f(r=>({...r,[e.id]:t}))})]}),(0,n.jsx)(a,{color:e.selected?m[e.id]||s.blue:s.faint,children:e.selected?"Selected":"Skip"})]},e.id))}),(0,n.jsx)("div",{style:{marginTop:"0.5rem"},children:v?(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{autoFocus:!0,value:D,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z(),"Escape"===e.key&&k(!1)},placeholder:"e.g. Warehouse Management, Billing, POS...",style:{flex:1,background:s.bg,border:s.border,borderRadius:s.radius,padding:"0.45rem 0.7rem",color:s.text,fontFamily:s.mono,fontSize:"0.78rem",outline:"none"}}),(0,n.jsx)("button",{onClick:z,style:{...null===(t=S)||void 0===t?void 0:t.btn,background:s.blue,color:"#fff",border:"none",borderRadius:s.radius,padding:"0.45rem 0.9rem",cursor:"pointer",fontFamily:s.mono,fontSize:"0.75rem"},children:"Add"}),(0,n.jsx)("button",{onClick:()=>k(!1),style:{background:"none",border:s.border,borderRadius:s.radius,padding:"0.45rem 0.7rem",cursor:"pointer",color:s.muted,fontFamily:s.mono,fontSize:"0.75rem"},children:"✕"})]}):(0,n.jsx)("button",{onClick:()=>k(!0),style:{width:"100%",background:"transparent",border:"1px dashed ".concat(s.muted),borderRadius:s.radius,padding:"0.5rem",color:s.muted,fontFamily:s.mono,fontSize:"0.75rem",cursor:"pointer",textAlign:"center"},children:"+ Add custom platform"})}),I>0&&(0,n.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,n.jsxs)(i,{onClick:y,style:{width:"100%",padding:"0.75rem",justifyContent:"center"},children:["Build ",I," Platform",1!==I?"s":""," →"]})})]})]})}function v(e){let{progress:t,platforms:r}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)(T,{children:"Building Platform Sandboxes"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.map(e=>{let r=t[e.id]||{status:"queued",progress:0};return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,padding:"1rem 1.25rem",boxShadow:s.shadow,border:s.border},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.6rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,n.jsx)("span",{children:c[e.id]||"\uD83D\uDD27"}),(0,n.jsx)("span",{style:{fontWeight:600,fontSize:"0.85rem"},children:e.name})]}),(0,n.jsx)(a,{color:"done"===r.status?s.mint:"building"===r.status?s.blue:"error"===r.status?s.red:s.faint,children:r.status})]}),(0,n.jsx)(l,{value:r.progress||("done"===r.status?100:"building"===r.status?60:15),color:m[e.id]||s.blue}),r.message&&(0,n.jsx)("div",{style:{marginTop:"0.4rem",fontSize:"0.7rem",color:s.muted},children:r.message})]},e.id)})}),(0,n.jsx)("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:s.muted,fontFamily:s.mono},children:"Building shared SQLite database + Express sandboxes on worker-1..."})]})}function k(e){let{platforms:t,sessionId:r,onChat:l,onProposeWorkers:d,proposing:c,showWorkers:m,realClientActive:u}=e,[p,f]=(0,o.useState)(null),[g,h]=(0,o.useState)(null);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,n.jsx)(T,{style:{marginBottom:0},children:"Platform Canvas"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u&&(0,n.jsx)(a,{color:s.orange,children:"⚡ Real Client Active"}),!m&&(0,n.jsx)(i,{onClick:d,disabled:c,small:!0,color:s.purple,children:c?"Analyzing...":"→ Propose Workers"})]})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:"1rem"},children:t.map(e=>(0,n.jsx)(D,{platform:e,sessionId:r,highlighted:p===e.id,expanded:g===e.id,onHighlight:()=>f(p===e.id?null:e.id),onExpand:()=>h(g===e.id?null:e.id),onChat:()=>l(e)},e.id))})]})}function D(e){let{platform:t,sessionId:r,highlighted:o,expanded:d,onHighlight:u,onExpand:p,onChat:f}=e,g=m[t.id]||s.blue,h=d?600:300,y=r&&t.url?"/api/demo/platform-proxy/".concat(r,"/").concat(t.id,"/"):null;return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,border:o?"2px solid ".concat(g):s.border,boxShadow:o?"0 0 0 4px ".concat(g,"22, ").concat(s.shadow):s.shadow,overflow:"hidden",transition:"all 0.2s",gridColumn:d?"span 2":"span 1"},children:[(0,n.jsxs)("div",{style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",borderBottom:s.border},children:[(0,n.jsx)("span",{style:{fontSize:"1rem"},children:c[t.id]||"\uD83D\uDD27"}),(0,n.jsx)("span",{style:{fontWeight:700,fontSize:"0.85rem",flex:1},children:t.name}),(0,n.jsx)(a,{color:"deployed"===t.status||"ready"===t.status?s.mint:"building"===t.status||"deploying"===t.status?s.blue:"error"===t.status?s.red:s.faint,children:t.status||"ready"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.3rem"},children:[(0,n.jsx)(i,{ghost:!0,small:!0,onClick:u,style:{padding:"0.2rem 0.5rem"},children:o?"◉":"○"}),(0,n.jsx)(i,{ghost:!0,small:!0,onClick:p,style:{padding:"0.2rem 0.5rem"},children:d?"⊡":"⊞"}),(0,n.jsx)(i,{ghost:!0,small:!0,onClick:f,children:"Chat"})]})]}),t.url?(0,n.jsx)("div",{style:{background:"#f8f8f8",position:"relative",overflow:"hidden",height:h},children:(0,n.jsx)("iframe",{src:y||t.url,style:{width:"100%",height:"100%",border:"none",display:"block"},title:t.name,sandbox:"allow-scripts allow-same-origin allow-forms"})}):(0,n.jsx)("div",{style:{height:h,display:"flex",alignItems:"center",justifyContent:"center",background:s.faint},children:(0,n.jsxs)("div",{style:{textAlign:"center",color:s.muted},children:[(0,n.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:c[t.id]||"\uD83D\uDD27"}),(0,n.jsx)("div",{style:{fontSize:"0.75rem",fontFamily:s.mono},children:"building"===t.status?"Building...":"No preview available"}),"building"===t.status&&(0,n.jsx)("div",{style:{marginTop:"0.5rem",width:120},children:(0,n.jsx)(l,{value:50,color:g})})]})}),t.url&&(0,n.jsxs)("div",{style:{padding:"0.5rem 1rem",borderTop:s.border,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,n.jsx)("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.url}),(0,n.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.blue,textDecoration:"none"},children:"Open ↗"})]})]})}function C(e){let{workers:t,sessionId:r,onDeploy:o,onRun:i,deployingWorker:l,logs:d,fetchLogs:c,activeTab:m,setActiveTab:u,realClientActive:p}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,n.jsx)(T,{style:{marginBottom:0},children:"AI Workers"}),p&&(0,n.jsx)(a,{color:s.orange,children:"⚡ Real Client Active"})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"0.85rem"},children:t.map(e=>(0,n.jsx)(F,{worker:e,sessionId:r,onDeploy:()=>o(e),onRun:()=>{i(e),c(e.id)},deploying:l===e.id,realClientActive:p},e.id))})]})}let z={"query-platform":"\uD83D\uDD0D","generate-report":"\uD83E\uDD16","send-notification":"\uD83D\uDCE4","call-webhook":"\uD83D\uDD17","run-script":"⚙️","transform-data":"\uD83D\uDD04",condition:"\uD83D\uDD00",wait:"⏱️"},I={schedule:"⏰",webhook:"\uD83D\uDD17",manual:"▶️",message:"\uD83D\uDCAC","platform-event":"\uD83D\uDCE1"};function F(e){let{worker:t,sessionId:r,onDeploy:o,onRun:l,deploying:d,realClientActive:c}=e,m=t.trigger||{},u=t.steps||[],p=I[m.type]||"⚡";return(0,n.jsxs)("div",{style:{background:s.card,borderRadius:s.radius,boxShadow:s.shadow,border:s.border,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:"0.85rem 1rem",borderBottom:s.border},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem"},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"0.87rem",marginBottom:"0.25rem"},children:t.name}),(0,n.jsx)("div",{style:{fontSize:"0.72rem",color:s.muted,lineHeight:1.4},children:t.description})]}),(0,n.jsx)(a,{color:"deployed"===t.status?s.mint:"running"===t.status?s.blue:"error"===t.status?s.red:s.faint,style:{flexShrink:0},children:t.status||"proposed"})]}),(0,n.jsxs)("div",{style:{marginTop:"0.6rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[(0,n.jsx)("span",{style:{fontSize:"0.78rem"},children:p}),(0,n.jsx)("span",{style:{fontSize:"0.65rem",fontFamily:s.mono,color:s.muted},children:m.label||("string"==typeof t.trigger?t.trigger:m.type||"manual")})]})]}),u.length>0&&(0,n.jsx)("div",{style:{padding:"0.6rem 1rem",borderBottom:s.border,display:"flex",alignItems:"center",gap:"0.3rem",overflowX:"auto"},children:u.map((e,t)=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",flexShrink:0},children:[(0,n.jsxs)("div",{style:{background:s.faint,borderRadius:s.radius,padding:"0.25rem 0.5rem",fontSize:"0.62rem",fontFamily:s.mono,display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,n.jsx)("span",{children:z[e.skill]||"●"}),(0,n.jsx)("span",{children:e.name||e.skill})]}),t<u.length-1&&(0,n.jsx)("span",{style:{color:s.muted,fontSize:"0.7rem"},children:"›"})]},e.id||t))}),(0,n.jsxs)("div",{style:{padding:"0.6rem 1rem",display:"flex",gap:"0.4rem",alignItems:"center"},children:[(0,n.jsx)("a",{href:"/worker/".concat(encodeURIComponent(t.id),"?session=").concat(r),style:{flex:1,display:"block",textAlign:"center",background:s.faint,border:s.border,borderRadius:s.radius,padding:"0.35rem 0.6rem",fontSize:"0.65rem",fontFamily:s.mono,textTransform:"uppercase",letterSpacing:"0.06em",color:s.text,textDecoration:"none",cursor:"pointer"},children:"View Worker →"}),"deployed"===t.status?(0,n.jsx)(i,{small:!0,onClick:l,color:s.blue,children:"▶"}):(0,n.jsx)(i,{small:!0,onClick:o,disabled:d,color:s.mint,style:{color:s.text},children:d?"...":"Deploy"})]})]})}function T(e){let{children:t,style:r={}}=e;return(0,n.jsx)("div",{style:{color:s.muted,fontSize:"0.6rem",fontFamily:s.mono,textTransform:"uppercase",letterSpacing:"0.12em",marginBottom:"0.75rem",...r},children:t})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4457)}),_N_E=e.O()}]);